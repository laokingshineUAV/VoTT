{"version":3,"file":"SamplingScoreGenerator.js","sourceRoot":"","sources":["../src/SamplingScoreGenerator.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,kCAAkC;AAElC,OAAO,EAAE,sBAAsB,EAAE,MAAM,0BAA0B,CAAC;AAClE,OAAO,EAAa,cAAc,EAAE,MAAM,uCAAuC,CAAC;AAElF;IAGI;QACI,IAAI,CAAC,iBAAiB,GAAG,IAAI,sBAAsB,EAAE,CAAC;IAC1D,CAAC;IAEM,iDAAgB,GAAvB,UAAwB,QAAmB;QACvC,IAAI,OAAO,GAAmB,IAAI,cAAc,EAAE,CAAC;QACnD,IAAI,KAAK,GAAW,CAAC,CAAC;QACtB,EAAE,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAChC,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;QACnF,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YAC5C,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;QACxF,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,2CAA2C;YAC3C,KAAK,GAAG,IAAI,CAAC,MAAM,EAAE,CAAA;QACzB,CAAC;QAED,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IACL,6BAAC;AAAD,CAAC,AArBD,IAqBC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport { HashCodeScoreGenerator } from './HashCodeScoreGenerator';\r\nimport { IEnvelope, ContextTagKeys } from '@microsoft/applicationinsights-common';\r\n\r\nexport class SamplingScoreGenerator {\r\n    private hashCodeGeneragor: HashCodeScoreGenerator;\r\n\r\n    constructor() {\r\n        this.hashCodeGeneragor = new HashCodeScoreGenerator();\r\n    }\r\n\r\n    public getSamplingScore(envelope: IEnvelope): number {\r\n        var tagKeys: ContextTagKeys = new ContextTagKeys();\r\n        var score: number = 0;\r\n        if (envelope.tags[tagKeys.userId]) {\r\n            score = this.hashCodeGeneragor.getHashCodeScore(envelope.tags[tagKeys.userId]);\r\n        } else if (envelope.tags[tagKeys.operationId]) {\r\n            score = this.hashCodeGeneragor.getHashCodeScore(envelope.tags[tagKeys.operationId]);\r\n        } else {\r\n            // tslint:disable-next-line:insecure-random\r\n            score = Math.random()\r\n        }\r\n\r\n        return score;\r\n    }\r\n}"]}