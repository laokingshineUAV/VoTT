{"ast":null,"code":"import _regeneratorRuntime from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\n\nvar _dec,\n    _class,\n    _jsxFileName = \"/home/jw/Documents/code/VoTT/src/react/components/pages/activeLearning/activeLearningPage.tsx\";\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport * as projectActions from \"../../../../redux/actions/projectActions\";\nimport { strings } from \"../../../../common/strings\";\nimport { ActiveLearningForm } from \"./activeLearningForm\";\nimport { toast } from \"react-toastify\";\n\nfunction mapStateToProps(state) {\n  return {\n    project: state.currentProject,\n    recentProjects: state.recentProjects\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(projectActions, dispatch)\n  };\n}\n\nvar ActiveLearningPage = (_dec = connect(mapStateToProps, mapDispatchToProps), _dec(_class =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ActiveLearningPage, _React$Component);\n\n  function ActiveLearningPage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ActiveLearningPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ActiveLearningPage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      settings: _this.props.project ? _this.props.project.activeLearningSettings : null\n    };\n\n    _this.onFormSubmit =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(settings) {\n        var updatedProject;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                updatedProject = _objectSpread({}, _this.props.project, {\n                  activeLearningSettings: settings\n                });\n                _context.next = 3;\n                return _this.props.actions.saveProject(updatedProject);\n\n              case 3:\n                toast.success(strings.activeLearning.messages.saveSuccess);\n\n                _this.props.history.goBack();\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.onFormCancel = function () {\n      _this.props.history.goBack();\n    };\n\n    return _this;\n  }\n\n  _createClass(ActiveLearningPage, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var projectId, projectToLoad;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                projectId = this.props.match.params[\"projectId\"]; // If we are creating a new project check to see if there is a partial\n                // project already created in local storage\n\n                if (!(!this.props.project && projectId)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                projectToLoad = this.props.recentProjects.find(function (project) {\n                  return project.id === projectId;\n                });\n\n                if (!projectToLoad) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                _context2.next = 6;\n                return this.props.actions.loadProject(projectToLoad);\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.project !== this.props.project) {\n        this.setState({\n          settings: this.props.project.activeLearningSettings\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"project-settings-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"project-settings-page-settings m-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-graduation-cap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"px-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, strings.activeLearning.title)), React.createElement(\"div\", {\n        className: \"m-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(ActiveLearningForm, {\n        settings: this.state.settings,\n        onSubmit: this.onFormSubmit,\n        onCancel: this.onFormCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return ActiveLearningPage;\n}(React.Component)) || _class);\nexport { ActiveLearningPage as default };","map":{"version":3,"sources":["/home/jw/Documents/code/VoTT/src/react/components/pages/activeLearning/activeLearningPage.tsx"],"names":["React","connect","bindActionCreators","projectActions","strings","ActiveLearningForm","toast","mapStateToProps","state","project","currentProject","recentProjects","mapDispatchToProps","dispatch","actions","ActiveLearningPage","settings","props","activeLearningSettings","onFormSubmit","updatedProject","saveProject","success","activeLearning","messages","saveSuccess","history","goBack","onFormCancel","projectId","match","params","projectToLoad","find","id","loadProject","prevProps","setState","title","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { RouteComponentProps } from \"react-router\";\nimport { bindActionCreators } from \"redux\";\nimport { IActiveLearningSettings, IProject, IApplicationState } from \"../../../../models/applicationState\";\nimport IProjectActions, * as projectActions from \"../../../../redux/actions/projectActions\";\nimport { strings } from \"../../../../common/strings\";\nimport { ActiveLearningForm } from \"./activeLearningForm\";\nimport { toast } from \"react-toastify\";\n\nexport interface IActiveLearningPageProps extends RouteComponentProps, React.Props<ActiveLearningPage> {\n    project: IProject;\n    recentProjects: IProject[];\n    actions: IProjectActions;\n}\n\nexport interface IActiveLearningPageState {\n    settings: IActiveLearningSettings;\n}\n\nfunction mapStateToProps(state: IApplicationState) {\n    return {\n        project: state.currentProject,\n        recentProjects: state.recentProjects,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators(projectActions, dispatch),\n    };\n}\n\n@connect(mapStateToProps, mapDispatchToProps)\nexport default class ActiveLearningPage extends React.Component<IActiveLearningPageProps, IActiveLearningPageState> {\n    public state: IActiveLearningPageState = {\n        settings: this.props.project ? this.props.project.activeLearningSettings : null,\n    };\n\n    public async componentDidMount() {\n        const projectId = this.props.match.params[\"projectId\"];\n        // If we are creating a new project check to see if there is a partial\n        // project already created in local storage\n        if (!this.props.project && projectId) {\n            const projectToLoad = this.props.recentProjects.find((project) => project.id === projectId);\n            if (projectToLoad) {\n                await this.props.actions.loadProject(projectToLoad);\n            }\n        }\n    }\n\n    public componentDidUpdate(prevProps: Readonly<IActiveLearningPageProps>) {\n        if (prevProps.project !== this.props.project) {\n            this.setState({ settings: this.props.project.activeLearningSettings });\n        }\n    }\n\n    public render() {\n        return (\n            <div className=\"project-settings-page\">\n                <div className=\"project-settings-page-settings m-3\">\n                    <h3>\n                        <i className=\"fas fa-graduation-cap\" />\n                        <span className=\"px-2\">\n                            {strings.activeLearning.title}\n                        </span>\n                    </h3>\n                    <div className=\"m-3\">\n                        <ActiveLearningForm\n                            settings={this.state.settings}\n                            onSubmit={this.onFormSubmit}\n                            onCancel={this.onFormCancel} />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    private onFormSubmit = async (settings: IActiveLearningSettings): Promise<void> => {\n        const updatedProject: IProject = {\n            ...this.props.project,\n            activeLearningSettings: settings,\n        };\n\n        await this.props.actions.saveProject(updatedProject);\n        toast.success(strings.activeLearning.messages.saveSuccess);\n        this.props.history.goBack();\n    }\n\n    private onFormCancel = (): void => {\n        this.props.history.goBack();\n    }\n}\n"]},"metadata":{},"sourceType":"module"}