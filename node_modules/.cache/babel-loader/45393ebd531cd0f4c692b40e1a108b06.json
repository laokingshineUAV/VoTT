{"ast":null,"code":"import _toConsumableArray from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/jw/Documents/code/VoTT/src/react/components/pages/appSettings/appSettingsForm.tsx\";\nimport React from \"react\";\nimport { strings, addLocValues } from \"../../../../common/strings\";\nimport Form from \"react-jsonschema-form\";\nimport { ObjectFieldTemplate } from \"../../common/objectField/objectFieldTemplate\";\nimport CustomFieldTemplate from \"../../common/customField/customFieldTemplate\";\nimport { ArrayFieldTemplate } from \"../../common/arrayField/arrayFieldTemplate\";\nimport { ProtectedInput } from \"../../common/protectedInput/protectedInput\";\nimport { CustomField } from \"../../common/customField/customField\";\nimport { generateKey } from \"../../../../common/crypto\"; // tslint:disable-next-line:no-var-requires\n\nvar formSchema = addLocValues(require(\"./appSettingsForm.json\")); // tslint:disable-next-line:no-var-requires\n\nvar uiSchema = addLocValues(require(\"./appSettingsForm.ui.json\"));\nexport var AppSettingsForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AppSettingsForm, _React$Component);\n\n  function AppSettingsForm(_props) {\n    var _this;\n\n    _classCallCheck(this, AppSettingsForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AppSettingsForm).call(this, _props));\n    _this.fields = {\n      securityToken: CustomField(ProtectedInput, function (props) {\n        return {\n          id: props.idSchema.$id,\n          value: props.formData || generateKey(),\n          onChange: props.onChange\n        };\n      })\n    };\n    _this.state = {\n      formSchema: _objectSpread({}, formSchema),\n      uiSchema: _objectSpread({}, uiSchema),\n      appSettings: _objectSpread({}, _this.props.appSettings),\n      classNames: [\"needs-validation\"]\n    };\n    _this.onFormValidate = _this.onFormValidate.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onFormCancel = _this.onFormCancel.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(AppSettingsForm, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.appSettings !== this.props.appSettings) {\n        this.setState({\n          appSettings: _objectSpread({}, this.props.appSettings)\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"app-settings-page-form p-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-cog fa-1x\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"px-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, strings.appSettings.title)), React.createElement(\"div\", {\n        className: \"m-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(Form, {\n        className: this.state.classNames.join(\" \"),\n        showErrorList: false,\n        liveValidate: true,\n        noHtml5Validate: true,\n        fields: this.fields,\n        ObjectFieldTemplate: ObjectFieldTemplate,\n        FieldTemplate: CustomFieldTemplate,\n        ArrayFieldTemplate: ArrayFieldTemplate,\n        validate: this.onFormValidate,\n        schema: this.state.formSchema,\n        uiSchema: this.state.uiSchema,\n        formData: this.state.appSettings,\n        onSubmit: function onSubmit(form) {\n          return _this2.props.onSubmit(form.formData);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-success mr-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, strings.appSettings.save), React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary btn-cancel\",\n        onClick: this.onFormCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, strings.common.cancel)))));\n    }\n  }, {\n    key: \"onFormValidate\",\n    value: function onFormValidate(appSettings, errors) {\n      if (this.state.classNames.indexOf(\"was-validated\") === -1) {\n        this.setState({\n          classNames: [].concat(_toConsumableArray(this.state.classNames), [\"was-validated\"])\n        });\n      }\n\n      return errors;\n    }\n  }, {\n    key: \"onFormCancel\",\n    value: function onFormCancel() {\n      if (this.props.onCancel) {\n        this.props.onCancel();\n      }\n    }\n  }]);\n\n  return AppSettingsForm;\n}(React.Component);","map":{"version":3,"sources":["/home/jw/Documents/code/VoTT/src/react/components/pages/appSettings/appSettingsForm.tsx"],"names":["React","strings","addLocValues","Form","ObjectFieldTemplate","CustomFieldTemplate","ArrayFieldTemplate","ProtectedInput","CustomField","generateKey","formSchema","require","uiSchema","AppSettingsForm","props","fields","securityToken","id","idSchema","$id","value","formData","onChange","state","appSettings","classNames","onFormValidate","bind","onFormCancel","prevProps","setState","title","join","form","onSubmit","save","common","cancel","errors","indexOf","onCancel","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { strings, addLocValues } from \"../../../../common/strings\";\nimport Form, { FormValidation, Widget } from \"react-jsonschema-form\";\nimport { ObjectFieldTemplate } from \"../../common/objectField/objectFieldTemplate\";\nimport CustomFieldTemplate from \"../../common/customField/customFieldTemplate\";\nimport { ArrayFieldTemplate } from \"../../common/arrayField/arrayFieldTemplate\";\nimport { IAppSettings } from \"../../../../models/applicationState\";\nimport { ProtectedInput } from \"../../common/protectedInput/protectedInput\";\nimport { CustomField } from \"../../common/customField/customField\";\nimport { generateKey } from \"../../../../common/crypto\";\n// tslint:disable-next-line:no-var-requires\nconst formSchema = addLocValues(require(\"./appSettingsForm.json\"));\n// tslint:disable-next-line:no-var-requires\nconst uiSchema = addLocValues(require(\"./appSettingsForm.ui.json\"));\n\nexport interface IAppSettingsFormProps extends React.Props<AppSettingsForm> {\n    appSettings: IAppSettings;\n    onSubmit: (appSettings: IAppSettings) => void;\n    onCancel?: () => void;\n}\n\nexport interface IAppSettingsFormState {\n    classNames: string[];\n    formSchema: any;\n    uiSchema: any;\n    appSettings: IAppSettings;\n}\n\nexport class AppSettingsForm extends React.Component<IAppSettingsFormProps, IAppSettingsFormState> {\n    private fields = {\n        securityToken: CustomField(ProtectedInput, (props) => ({\n            id: props.idSchema.$id,\n            value: props.formData || generateKey(),\n            onChange: props.onChange,\n        })),\n    };\n\n    constructor(props: IAppSettingsFormProps) {\n        super(props);\n\n        this.state = {\n            formSchema: { ...formSchema },\n            uiSchema: { ...uiSchema },\n            appSettings: { ...this.props.appSettings },\n            classNames: [\"needs-validation\"],\n        };\n\n        this.onFormValidate = this.onFormValidate.bind(this);\n        this.onFormCancel = this.onFormCancel.bind(this);\n    }\n\n    public componentDidUpdate(prevProps: IAppSettingsFormProps) {\n        if (prevProps.appSettings !== this.props.appSettings) {\n            this.setState({\n                appSettings: { ...this.props.appSettings },\n            });\n        }\n    }\n\n    public render() {\n        return (\n            <div className=\"app-settings-page-form p-3\">\n                <h3 className=\"mb-3\">\n                    <i className=\"fas fa-cog fa-1x\"></i>\n                    <span className=\"px-2\">{strings.appSettings.title}</span>\n                </h3>\n                <div className=\"m-3\">\n                    <Form\n                        className={this.state.classNames.join(\" \")}\n                        showErrorList={false}\n                        liveValidate={true}\n                        noHtml5Validate={true}\n                        fields={this.fields}\n                        ObjectFieldTemplate={ObjectFieldTemplate}\n                        FieldTemplate={CustomFieldTemplate}\n                        ArrayFieldTemplate={ArrayFieldTemplate}\n                        validate={this.onFormValidate}\n                        schema={this.state.formSchema}\n                        uiSchema={this.state.uiSchema}\n                        formData={this.state.appSettings}\n                        onSubmit={(form) => this.props.onSubmit(form.formData)}>\n                        <div>\n                            <button type=\"submit\" className=\"btn btn-success mr-1\">{strings.appSettings.save}</button>\n                            <button type=\"button\"\n                                className=\"btn btn-secondary btn-cancel\"\n                                onClick={this.onFormCancel}>{strings.common.cancel}</button>\n                        </div>\n                    </Form>\n                </div>\n            </div>\n        );\n    }\n\n    private onFormValidate(appSettings: IAppSettings, errors: FormValidation) {\n        if (this.state.classNames.indexOf(\"was-validated\") === -1) {\n            this.setState({\n                classNames: [...this.state.classNames, \"was-validated\"],\n            });\n        }\n\n        return errors;\n    }\n\n    private onFormCancel() {\n        if (this.props.onCancel) {\n            this.props.onCancel();\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}