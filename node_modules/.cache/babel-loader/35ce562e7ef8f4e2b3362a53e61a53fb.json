{"ast":null,"code":"import * as tslib_1 from \"tslib\";\nimport { BaseRequestPolicy, HttpHeaders, isNode } from \"@azure/ms-rest-js\";\nimport { HeaderConstants } from \"../utils/constants\";\n/**\n * TelemetryPolicy is a policy used to tag user-agent header for every requests.\n *\n * @class TelemetryPolicy\n * @extends {BaseRequestPolicy}\n */\n\nvar TelemetryPolicy =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(TelemetryPolicy, _super);\n  /**\n   * Creates an instance of TelemetryPolicy.\n   * @param {RequestPolicy} nextPolicy\n   * @param {RequestPolicyOptions} options\n   * @param {ITelemetryOptions} [telemetry]\n   * @memberof TelemetryPolicy\n   */\n\n\n  function TelemetryPolicy(nextPolicy, options, telemetry) {\n    var _this = _super.call(this, nextPolicy, options) || this;\n\n    _this.telemetry = telemetry;\n    return _this;\n  }\n  /**\n   * Sends out request.\n   *\n   * @param {WebResource} request\n   * @returns {Promise<HttpOperationResponse>}\n   * @memberof TelemetryPolicy\n   */\n\n\n  TelemetryPolicy.prototype.sendRequest = function (request) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n      return tslib_1.__generator(this, function (_a) {\n        if (isNode) {\n          if (!request.headers) {\n            request.headers = new HttpHeaders();\n          }\n\n          if (!request.headers.get(HeaderConstants.USER_AGENT)) {\n            request.headers.set(HeaderConstants.USER_AGENT, this.telemetry);\n          }\n        }\n\n        return [2\n        /*return*/\n        , this._nextPolicy.sendRequest(request)];\n      });\n    });\n  };\n\n  return TelemetryPolicy;\n}(BaseRequestPolicy);\n\nexport { TelemetryPolicy };","map":null,"metadata":{},"sourceType":"module"}