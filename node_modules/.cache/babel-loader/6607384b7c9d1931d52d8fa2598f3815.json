{"ast":null,"code":"import _regeneratorRuntime from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\n\nvar _dec,\n    _class,\n    _jsxFileName = \"/home/jw/Documents/code/VoTT/src/react/components/pages/export/exportPage.tsx\";\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport * as projectActions from \"../../../../redux/actions/projectActions\";\nimport ExportForm from \"./exportForm\";\nimport { strings } from \"../../../../common/strings\";\nimport { ExportAssetState } from \"../../../../providers/export/exportProvider\";\nimport { toast } from \"react-toastify\";\n/**\n * Properties for Export Page\n * @member project - Project being edited\n * @member recentProjects - Array of projects recently viewed/edited\n * @member actions - Project actions\n */\n\nfunction mapStateToProps(state) {\n  return {\n    project: state.currentProject,\n    recentProjects: state.recentProjects\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(projectActions, dispatch)\n  };\n}\n/**\n * @name - Export Page\n * @description - Page for adding/editing/removing export configurations\n */\n\n\nvar ExportPage = (_dec = connect(mapStateToProps, mapDispatchToProps), _dec(_class =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ExportPage, _React$Component);\n\n  function ExportPage(props, context) {\n    var _this;\n\n    _classCallCheck(this, ExportPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ExportPage).call(this, props, context));\n    _this.emptyExportFormat = {\n      providerType: \"\",\n      providerOptions: {\n        assetState: ExportAssetState.All\n      }\n    };\n\n    _this.onFormSubmit =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(exportFormat) {\n        var projectToUpdate;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                projectToUpdate = _objectSpread({}, _this.props.project, {\n                  exportFormat: exportFormat\n                });\n                _context.next = 3;\n                return _this.props.actions.saveProject(projectToUpdate);\n\n              case 3:\n                toast.success(strings.export.messages.saveSuccess);\n\n                _this.props.history.goBack();\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    var projectId = _this.props.match.params[\"projectId\"];\n\n    if (!_this.props.project && projectId) {\n      var _project = _this.props.recentProjects.find(function (project) {\n        return project.id === projectId;\n      });\n\n      _this.props.actions.loadProject(_project);\n    }\n\n    _this.onFormSubmit = _this.onFormSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onFormCancel = _this.onFormCancel.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ExportPage, [{\n    key: \"render\",\n    value: function render() {\n      var exportFormat = this.props.project && this.props.project.exportFormat ? this.props.project.exportFormat : _objectSpread({}, this.emptyExportFormat);\n      return React.createElement(\"div\", {\n        className: \"m-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-sliders-h fa-1x\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"px-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, strings.export.settings)), React.createElement(\"div\", {\n        className: \"m-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(ExportForm, {\n        settings: exportFormat,\n        onSubmit: this.onFormSubmit,\n        onCancel: this.onFormCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      })));\n    }\n  }, {\n    key: \"onFormCancel\",\n    value: function onFormCancel() {\n      this.props.history.goBack();\n    }\n  }]);\n\n  return ExportPage;\n}(React.Component)) || _class);\nexport { ExportPage as default };","map":{"version":3,"sources":["/home/jw/Documents/code/VoTT/src/react/components/pages/export/exportPage.tsx"],"names":["React","connect","bindActionCreators","projectActions","ExportForm","strings","ExportAssetState","toast","mapStateToProps","state","project","currentProject","recentProjects","mapDispatchToProps","dispatch","actions","ExportPage","props","context","emptyExportFormat","providerType","providerOptions","assetState","All","onFormSubmit","exportFormat","projectToUpdate","saveProject","success","export","messages","saveSuccess","history","goBack","projectId","match","params","find","id","loadProject","bind","onFormCancel","settings","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport IProjectActions, * as projectActions from \"../../../../redux/actions/projectActions\";\nimport ExportForm from \"./exportForm\";\nimport { IProject, IApplicationState, IExportFormat } from \"../../../../models/applicationState\";\nimport { strings } from \"../../../../common/strings\";\nimport { ExportAssetState } from \"../../../../providers/export/exportProvider\";\nimport { toast } from \"react-toastify\";\n\n/**\n * Properties for Export Page\n * @member project - Project being edited\n * @member recentProjects - Array of projects recently viewed/edited\n * @member actions - Project actions\n */\nexport interface IExportPageProps extends RouteComponentProps, React.Props<ExportPage> {\n    project: IProject;\n    recentProjects: IProject[];\n    actions: IProjectActions;\n}\n\nfunction mapStateToProps(state: IApplicationState) {\n    return {\n        project: state.currentProject,\n        recentProjects: state.recentProjects,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators(projectActions, dispatch),\n    };\n}\n\n/**\n * @name - Export Page\n * @description - Page for adding/editing/removing export configurations\n */\n@connect(mapStateToProps, mapDispatchToProps)\nexport default class ExportPage extends React.Component<IExportPageProps> {\n    private emptyExportFormat: IExportFormat = {\n        providerType: \"\",\n        providerOptions: {\n            assetState: ExportAssetState.All,\n        },\n    };\n\n    constructor(props, context) {\n        super(props, context);\n\n        const projectId = this.props.match.params[\"projectId\"];\n        if (!this.props.project && projectId) {\n            const project = this.props.recentProjects.find((project) => project.id === projectId);\n            this.props.actions.loadProject(project);\n        }\n\n        this.onFormSubmit = this.onFormSubmit.bind(this);\n        this.onFormCancel = this.onFormCancel.bind(this);\n    }\n\n    public render() {\n        const exportFormat = this.props.project && this.props.project.exportFormat\n            ? this.props.project.exportFormat\n            : { ...this.emptyExportFormat };\n\n        return (\n            <div className=\"m-3\">\n                <h3>\n                    <i className=\"fas fa-sliders-h fa-1x\"></i>\n                    <span className=\"px-2\">\n                        {strings.export.settings}\n                    </span>\n                </h3>\n                <div className=\"m-3\">\n                    <ExportForm\n                        settings={exportFormat}\n                        onSubmit={this.onFormSubmit}\n                        onCancel={this.onFormCancel} />\n                </div>\n            </div>\n        );\n    }\n\n    private onFormSubmit = async (exportFormat: IExportFormat) => {\n        const projectToUpdate: IProject = {\n            ...this.props.project,\n            exportFormat,\n        };\n\n        await this.props.actions.saveProject(projectToUpdate);\n        toast.success(strings.export.messages.saveSuccess);\n        this.props.history.goBack();\n    }\n\n    private onFormCancel() {\n        this.props.history.goBack();\n    }\n}\n"]},"metadata":{},"sourceType":"module"}