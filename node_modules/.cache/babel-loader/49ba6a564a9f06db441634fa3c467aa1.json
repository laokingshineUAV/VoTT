{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _get = require(\"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/get\");\n\nvar _inherits = require(\"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar RegionComponent_1 = require(\"./Component/RegionComponent\");\n/**\r\n * The region menu element.\r\n */\n\n\nvar MenuElement =\n/*#__PURE__*/\nfunction (_RegionComponent_1$Re) {\n  _inherits(MenuElement, _RegionComponent_1$Re);\n\n  /**\r\n   * Creates the menu component.\r\n   * @param paper - The `Snap.Paper` object to draw on.\r\n   * @param paperRect - The parent bounding box for created component.\r\n   * @param regionData - The `RegionData` object shared across components. Used also for initial setup.\r\n   * @param callbacks - The external callbacks collection.\r\n   */\n  function MenuElement(paper) {\n    var _this;\n\n    var paperRect = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var regionData = arguments.length > 2 ? arguments[2] : undefined;\n    var callbacks = arguments.length > 3 ? arguments[3] : undefined;\n\n    _classCallCheck(this, MenuElement);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MenuElement).call(this, paper, paperRect, regionData, callbacks));\n    /**\r\n     * Default menu item size.\r\n     */\n\n    _this.menuItemSize = 20;\n    /**\r\n     * Default menu width.\r\n     */\n\n    _this.mw = _this.menuItemSize + 10;\n    /**\r\n     * Default menu height.\r\n     */\n\n    _this.mh = _this.menuItemSize + 10;\n    /**\r\n     * Threshold for positioning menu inside/outside\r\n     */\n\n    _this.dh = 20;\n    /**\r\n     * Threshold for positioning menu left/right\r\n     */\n\n    _this.dw = 5;\n\n    _this.buildUI();\n\n    return _this;\n  }\n  /**\r\n   * Add a new icon with action to menu.\r\n   * @param action - Item action description.\r\n   * @param icon - Item SVG-path string.\r\n   * @param actor - The callback function.\r\n   */\n\n\n  _createClass(MenuElement, [{\n    key: \"addAction\",\n    value: function addAction(action, icon, actor) {\n      var _this2 = this;\n\n      var item = this.menuGroup.g();\n      var itemBack = this.menuGroup.rect(5, 5, this.menuItemSize, this.menuItemSize, 5, 5);\n      itemBack.addClass(\"menuItemBack\");\n      var itemIcon = this.menuGroup.path(MenuElement.PathCollection.delete.path);\n      itemIcon.transform(\"scale(0.2) translate(26 26)\");\n      itemIcon.addClass(\"menuIcon\");\n      itemIcon.addClass(\"menuIcon-\" + icon);\n      var itemRect = this.menuGroup.rect(5, 5, this.menuItemSize, this.menuItemSize, 5, 5);\n      itemRect.addClass(\"menuItem\");\n      item.add(itemBack);\n      item.add(itemIcon);\n      item.add(itemRect);\n      item.click(function (e) {\n        actor(_this2.region, action);\n      });\n      this.menuItemsGroup.add(item);\n      this.menuItems.push(item);\n    }\n    /**\r\n     * Attach the menu to specified region element.\r\n     * @param region - The host region element.\r\n     */\n\n  }, {\n    key: \"attachTo\",\n    value: function attachTo(region) {\n      var _this3 = this;\n\n      this.region = region;\n      this.regionData.initFrom(region.regionData);\n      this.rearrangeMenuPosition();\n      window.requestAnimationFrame(function () {\n        _this3.menuGroup.attr({\n          x: _this3.mx,\n          y: _this3.my\n        });\n      });\n    }\n  }, {\n    key: \"move\",\n    value: function move(arg1, arg2) {\n      var _this4 = this;\n\n      _get(_getPrototypeOf(MenuElement.prototype), \"move\", this).call(this, arg1, arg2);\n\n      this.rearrangeMenuPosition();\n      window.requestAnimationFrame(function () {\n        _this4.menuGroup.attr({\n          x: _this4.mx,\n          y: _this4.my\n        });\n      });\n    }\n    /**\r\n     * Move menu according to new region size.\r\n     * @remarks This method moves the virtual shadow of the region and then rearranges menu position.\r\n     * @param width - New region width.\r\n     * @param height - New region height.\r\n     */\n\n  }, {\n    key: \"resize\",\n    value: function resize(width, height) {\n      var _this5 = this;\n\n      _get(_getPrototypeOf(MenuElement.prototype), \"resize\", this).call(this, width, height);\n\n      this.rearrangeMenuPosition();\n      window.requestAnimationFrame(function () {\n        _this5.menuGroup.attr({\n          x: _this5.mx,\n          y: _this5.my\n        });\n      });\n    }\n    /**\r\n     * Redraw menu element.\r\n     */\n\n  }, {\n    key: \"redraw\",\n    value: function redraw() {} // do nothing\n\n    /**\r\n     * Visually hide menu element.\r\n     */\n\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      var _this6 = this;\n\n      window.requestAnimationFrame(function () {\n        _this6.menuGroup.attr({\n          visibility: \"hidden\"\n        });\n      });\n    }\n    /**\r\n     * Visually show menu element.\r\n     */\n\n  }, {\n    key: \"show\",\n    value: function show() {\n      var _this7 = this;\n\n      window.requestAnimationFrame(function () {\n        _this7.menuGroup.attr({\n          visibility: \"visible\"\n        });\n      });\n    }\n    /**\r\n     * Show menu element on the specified region.\r\n     * @param region - The host region element.\r\n     */\n\n  }, {\n    key: \"showOnRegion\",\n    value: function showOnRegion(region) {\n      this.attachTo(region);\n      this.show();\n    }\n    /**\r\n     * Creates the menu element UI.\r\n     */\n\n  }, {\n    key: \"buildUI\",\n    value: function buildUI() {\n      var _this8 = this;\n\n      var menuSVG = this.paper.svg(this.mx, this.my, this.mw, this.mh, this.mx, this.my, this.mw, this.mh); // Snap.Paper\n\n      this.menuGroup = Snap(menuSVG).paper;\n      this.menuGroup.addClass(\"menuLayer\");\n      this.rearrangeMenuPosition();\n      this.menuRect = this.menuGroup.rect(0, 0, this.mw, this.mh, 5, 5);\n      this.menuRect.addClass(\"menuRectStyle\");\n      this.menuItemsGroup = this.menuGroup.g();\n      this.menuItemsGroup.addClass(\"menuItems\");\n      this.menuItems = new Array();\n      this.menuGroup.add(this.menuRect);\n      this.menuGroup.add(this.menuItemsGroup);\n      this.menuGroup.mouseover(function (e) {\n        _this8.onManipulationBegin();\n      });\n      this.menuGroup.mouseout(function (e) {\n        _this8.onManipulationEnd();\n      });\n    }\n    /**\r\n     * Updates menu position.\r\n     */\n\n  }, {\n    key: \"rearrangeMenuPosition\",\n    value: function rearrangeMenuPosition() {\n      /* // position menu inside\r\n      if (this.mh <= this.boundRect.height - this.dh) {\r\n          this.my = this.y + this.boundRect.height / 2 - this.mh / 2;\r\n          // position menu on the right side\r\n          if (this.x + this.boundRect.width + this.mw / 2 + this.dw < this.paperRect.width) {\r\n              this.mx = this.x + this.boundRect.width - this.mw / 2;\r\n          } else if (this.x - this.mw / 2 - this.dw > 0) { // position menu on the left side\r\n              this.mx = this.x - this.mw / 2;\r\n          } else { // position menu on the right side INSIDE\r\n              this.mx = this.x + this.boundRect.width - this.mw - this.dw;\r\n          }\r\n      } else { // position menu outside\r\n          if (this.y + this.mh > this.paperRect.height) {\r\n              this.my = this.paperRect.height - this.mh - this.dw;\r\n          } else {\r\n              this.my = this.y;\r\n          }\r\n          // position menu on the right side\r\n          if (this.x + this.boundRect.width + this.mw + 2 * this.dw < this.paperRect.width) {\r\n              this.mx = this.x + this.boundRect.width + this.dw;\r\n          } else if (this.x - this.mw - 2 * this.dw > 0) { // position menu on the left side\r\n              this.mx = this.x - this.mw - this.dw;\r\n          } else { // position menu on the right side INSIDE\r\n              this.mx = this.x + this.boundRect.width - this.mw - this.dw;\r\n          }\r\n      } */\n      // position menu outside\n      if (this.y + this.mh + this.dw > this.paperRect.height) {\n        this.my = this.paperRect.height - this.mh - this.dw;\n      } else {\n        this.my = this.y + this.dw;\n      } // position menu on the right side\n\n\n      if (this.x + this.boundRect.width + this.mw + 2 * this.dw < this.paperRect.width) {\n        this.mx = this.x + this.boundRect.width + this.dw;\n      } else if (this.x - this.mw - 2 * this.dw > 0) {\n        // position menu on the left side\n        this.mx = this.x - this.mw - this.dw;\n      } else {\n        // position menu on the right side INSIDE\n        this.mx = this.x + this.boundRect.width - this.mw - this.dw;\n      }\n    }\n  }]);\n\n  return MenuElement;\n}(RegionComponent_1.RegionComponent);\n/**\r\n * The SVG path for x-button (close).\r\n */\n\n\nMenuElement.PathCollection = {\n  delete: {\n    iconSize: 96,\n    path: \"M 83.4 21.1 L 74.9 12.6 L 48 39.5 L 21.1 12.6 L 12.6 21.1 L 39.5 48 L 12.6 74.9 \" + \"L 21.1 83.4 L 48 56.5 L 74.9 83.4 L 83.4 74.9 L 56.5 48 Z\"\n  }\n};\nexports.MenuElement = MenuElement;","map":null,"metadata":{},"sourceType":"script"}