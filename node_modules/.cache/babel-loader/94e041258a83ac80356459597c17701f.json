{"ast":null,"code":"import { isNode } from \"@azure/ms-rest-js\";\nimport * as os from \"os\";\nimport { TelemetryPolicy } from \"./policies/TelemetryPolicy\";\nimport { SDK_VERSION } from \"./utils/constants\";\n/**\n * TelemetryPolicyFactory is a factory class helping generating TelemetryPolicy objects.\n *\n * @export\n * @class TelemetryPolicyFactory\n * @implements {RequestPolicyFactory}\n */\n\nvar TelemetryPolicyFactory =\n/** @class */\nfunction () {\n  /**\n   * Creates an instance of TelemetryPolicyFactory.\n   * @param {ITelemetryOptions} [telemetry]\n   * @memberof TelemetryPolicyFactory\n   */\n  function TelemetryPolicyFactory(telemetry) {\n    var userAgentInfo = [];\n\n    if (isNode) {\n      if (telemetry) {\n        var telemetryString = telemetry.value;\n\n        if (telemetryString.length > 0 && userAgentInfo.indexOf(telemetryString) === -1) {\n          userAgentInfo.push(telemetryString);\n        }\n      } // e.g. Azure-Storage/10.0.0\n\n\n      var libInfo = \"Azure-Storage/\" + SDK_VERSION;\n\n      if (userAgentInfo.indexOf(libInfo) === -1) {\n        userAgentInfo.push(libInfo);\n      } // e.g. (NODE-VERSION 4.9.1; Windows_NT 10.0.16299)\n\n\n      var runtimeInfo = \"(NODE-VERSION \" + process.version + \"; \" + os.type() + \" \" + os.release() + \")\";\n\n      if (userAgentInfo.indexOf(runtimeInfo) === -1) {\n        userAgentInfo.push(runtimeInfo);\n      }\n    }\n\n    this.telemetryString = userAgentInfo.join(\" \");\n  }\n\n  TelemetryPolicyFactory.prototype.create = function (nextPolicy, options) {\n    return new TelemetryPolicy(nextPolicy, options, this.telemetryString);\n  };\n\n  return TelemetryPolicyFactory;\n}();\n\nexport { TelemetryPolicyFactory };","map":null,"metadata":{},"sourceType":"module"}