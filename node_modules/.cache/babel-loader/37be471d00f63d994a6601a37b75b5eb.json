{"ast":null,"code":"import _objectSpread from \"/home/jw/Documents/code/VoTT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nexport function createLocalStorage(config) {\n  return function (store) {\n    return function (next) {\n      return function (action) {\n        var result = next(action);\n        var state = store.getState();\n        config.paths.forEach(function (path) {\n          if (state[path]) {\n            var json = JSON.stringify(state[path]);\n            localStorage.setItem(path, json);\n          }\n        });\n        return result;\n      };\n    };\n  };\n}\nexport function mergeInitialState(state, paths) {\n  var initialState = _objectSpread({}, state);\n\n  paths.forEach(function (path) {\n    var json = localStorage.getItem(path);\n\n    if (json) {\n      initialState[path] = JSON.parse(json);\n    }\n  });\n  return initialState;\n}","map":{"version":3,"sources":["/home/jw/Documents/code/VoTT/src/redux/middleware/localStorage.ts"],"names":["createLocalStorage","config","store","next","action","result","state","getState","paths","forEach","path","json","JSON","stringify","localStorage","setItem","mergeInitialState","initialState","getItem","parse"],"mappings":";AAMA,OAAO,SAASA,kBAAT,CAA4BC,MAA5B,EAAgF;AACnF,SAAO,UAACC,KAAD;AAAA,WAA+C,UAACC,IAAD;AAAA,aAA+B,UAACC,MAAD,EAAiB;AAClG,YAAMC,MAAM,GAAGF,IAAI,CAACC,MAAD,CAAnB;AACA,YAAME,KAAK,GAAGJ,KAAK,CAACK,QAAN,EAAd;AAEAN,QAAAA,MAAM,CAACO,KAAP,CAAaC,OAAb,CAAqB,UAACC,IAAD,EAAU;AAC3B,cAAIJ,KAAK,CAACI,IAAD,CAAT,EAAiB;AACb,gBAAMC,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAeP,KAAK,CAACI,IAAD,CAApB,CAAb;AACAI,YAAAA,YAAY,CAACC,OAAb,CAAqBL,IAArB,EAA2BC,IAA3B;AACH;AACJ,SALD;AAOA,eAAON,MAAP;AACH,OAZqD;AAAA,KAA/C;AAAA,GAAP;AAaH;AAED,OAAO,SAASW,iBAAT,CAA2BV,KAA3B,EAAuCE,KAAvC,EAAwD;AAC3D,MAAMS,YAAY,qBAAQX,KAAR,CAAlB;;AACAE,EAAAA,KAAK,CAACC,OAAN,CAAc,UAACC,IAAD,EAAU;AACpB,QAAMC,IAAI,GAAGG,YAAY,CAACI,OAAb,CAAqBR,IAArB,CAAb;;AACA,QAAIC,IAAJ,EAAU;AACNM,MAAAA,YAAY,CAACP,IAAD,CAAZ,GAAqBE,IAAI,CAACO,KAAL,CAAWR,IAAX,CAArB;AACH;AACJ,GALD;AAOA,SAAOM,YAAP;AACH","sourcesContent":["import { Middleware, Dispatch, AnyAction, MiddlewareAPI } from \"redux\";\n\nexport interface ILocalStorageMiddlewareOptions {\n    paths: string[];\n}\n\nexport function createLocalStorage(config: ILocalStorageMiddlewareOptions): Middleware {\n    return (store: MiddlewareAPI<Dispatch<AnyAction>>) => (next: Dispatch<AnyAction>) => (action: any) => {\n        const result = next(action);\n        const state = store.getState();\n\n        config.paths.forEach((path) => {\n            if (state[path]) {\n                const json = JSON.stringify(state[path]);\n                localStorage.setItem(path, json);\n            }\n        });\n\n        return result;\n    };\n}\n\nexport function mergeInitialState(state: any, paths: string[]) {\n    const initialState = { ...state };\n    paths.forEach((path) => {\n        const json = localStorage.getItem(path);\n        if (json) {\n            initialState[path] = JSON.parse(json);\n        }\n    });\n\n    return initialState;\n}\n"]},"metadata":{},"sourceType":"module"}